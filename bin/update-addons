#!/bin/bash
set -euo pipefail
IFS=$'\n\t'

git submodule | awk '{print $2}' | \
 xargs -n 1 -I %% bash -c 'git config -f .gitmodules submodule.%%.shallow true' 
git submodule update --depth=1

git submodule update --init --recursive --remote
